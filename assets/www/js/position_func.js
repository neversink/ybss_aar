function getCurrentPosition(t,o){navigator.userAgent.indexOf("Android")>0?baidu_location.getCurrentPosition(function(o){var e=o.lontitude,n=o.latitude;tlog("转换前x坐标",e),tlog("转换前y坐标",n);var a=bdToGaoDe(e,n),i=a[0],r=a[1];tlog("转换后x坐标",i),tlog("转换后y坐标",r),saveCurrentLat(r),saveCurrentLng(i),console.log("Android定位成功:"+i+","+r),t({latitude:r,lontitude:i})},function(t){console.log("Android定位失败"),o(t)}):navigator.userAgent.indexOf("iPhone")>0?(iOSLocateSuccessCallback=t,iOSLocateErrorCallback=o,AMap.event.addListener(geolocation,"complete",onLocateComplete),AMap.event.addListener(geolocation,"error",onLocateError),geolocation.getCurrentPosition()):(saveCurrentLat(24.4570158751),saveCurrentLng(118.0849411665),console.log("PC定位成功"),t({latitude:24.4570158751,lontitude:118.0849411665}))}function onLocateComplete(t){var o=new Object;o.latitude=t.position.getLat(),o.lontitude=t.position.getLng(),saveCurrentLat(o.latitude),saveCurrentLng(o.lontitude),console.log("iOS定位成功:"+o.latitude+","+o.lontitude),iOSLocateSuccessCallback(o)}function onLocateError(t){console.log("iOS定位失败",t),iOSLocateErrorCallback("定位失败")}function bdToGaoDe(t,o){var e=52.35987755982988,n=t-.0065,a=o-.006,i=Math.sqrt(n*n+a*a)-2e-5*Math.sin(a*e),r=Math.atan2(a,n)-3e-6*Math.cos(n*e),l=i*Math.cos(r),c=i*Math.sin(r);return[l,c]}var iOSLocateSuccessCallback,iOSLocateErrorCallback;