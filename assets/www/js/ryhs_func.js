function add_to_verify(e){var t="#jrhs"+e,i=[{text:"请选择",label:!0},{text:"正常居住",onClick:function(){hs_map.removeByKey(e+""),hs_map.put(e+"","正常居住"),$(t).html("正常居住"),refreshLabels(),arr_hsitem.remove(e),add_verify_item_jsonobj(e,"",1)}},{text:"未见面",onClick:function(){hs_map.removeByKey(e+""),hs_map.put(e+"","未见面"),$(t).html("未见面"),refreshLabels(),arr_hsitem.remove(e),add_verify_item_jsonobj(e,"",2)}},{text:"离开",onClick:function(){show_qwcs_modal(e,t)}}],r=[{text:"移除核实",bg:"danger",onClick:function(){hs_map.removeByKey(e+""),$(t).html("加入核实"),refreshLabels(),arr_hsitem.remove(e)}}],a=[{text:"取消",bg:"primary"}],s=[i,r,a];$.actions(s)}function show_qwcs_modal(e,t){$.modal({text:'<div class="list-block" style="margin:0;">   <ul style="border:0">       <li>           <div class="item-content">               <div class="item-inner" style="border: 0;">                   <div class="item-title label" style="width:35%">去往处所</div>                   <div class="item-input" align="left">                   <input type="radio" name="qwcs" value="本市" style="margin-left: 0.5rem ; margin-right: 0.75rem; ">本市</input><br>                   <input type="radio" name="qwcs" value="省内" style="margin-left: 0.5rem ; margin-right: 0.75rem; ">省内</input><br>                   <input type="radio" name="qwcs" value="省外" style="margin-left: 0.5rem ; margin-right: 0.75rem; ">省外</input><br>                   <input type="radio" name="qwcs" value="国外" style="margin-left: 0.5rem ; margin-right: 0.75rem; ">国外</input><br>                   <input type="radio" name="qwcs" value="其他" style="margin-left: 0.5rem ; margin-right: 0.75rem; ">其他</input>                   </div>               </div>           </div>       </li>   </ul></div>',buttons:[{text:"取消",onClick:function(){}},{text:"确定",onClick:function(){hs_map.removeByKey(e+""),hs_map.put(e+"","离开"),$(t).html("离开"),refreshLabels(),arr_hsitem.remove(e);var i=$('input[name="qwcs"]:checked').val();add_verify_item_jsonobj(e,i,3)}}]})}function add_verify_item_jsonobj(e,t,i){var r;switch(i){case 1:r="正常居住";break;case 2:r="未见面";break;case 3:r="离开"}var a=new Object;a.rylx="syrk",a.hsqk=r,a.rybh=e,a.qwcs=t,a.dwid=get_current_dw_id(),a.systemid=get_current_system_id(),a.all_full_addr=get_current_all_full_addr(),arr_hsitem.push(a)}function add_to_verify_commit(){var e=(hs_map.keys(),new AjaxJsonRequest("syrk_hsqk_save.jsp"));e.data.datas=arr_hsitem,e.send("提交审核中",function(e){$.alert("提交核实成功");for(var t=0;t<arr_hsitem.length;t++){var i=arr_hsitem[t].rybh,r=arr_hsitem[t].hsqk,a="#jrhs"+i,s="#ljhs"+i;$(a).html("已核实"),$(a).attr("onclick","javascript:void(0);"),$(s).html(r),$(s).attr("onclick","javascript:void(0);")}clearHsCache()},function(e){$.alert("提交核实失败，"+e)})}function quick_verify(e,t){$.modal({title:"立即核实",text:'<div class="list-block" style="margin:0;">   <ul style="border:0">       <li>           <div class="item-content">               <div class="item-inner" style="border: 0;">                   <div class="item-title label" style="width:35%">联系方式</div>                   <div class="item-input">                       <input type="text" name="lxfs" placeholder="请输入联系方式" value="'+t+'">                   </div>               </div>           </div>       </li>       <li>           <div class="item-content">               <div class="item-inner" style="border: 0;">                   <div class="item-title label" style="width:35%">核实情况</div>                   <div class="item-input" align="left">                   <input type="radio" onchange="toogle_qwcs(1)" name="hsqk" value="正常居住" style="margin-left: 0.5rem ; margin-right: 0.75rem; ">正常居住</input><br>                   <input type="radio" onchange="toogle_qwcs(2)" name="hsqk" value="未见面" style="margin-left: 0.5rem ; margin-right: 0.75rem; ">未见面</input><br>                   <input type="radio" onchange="toogle_qwcs(3)" name="hsqk" value="离开" style="margin-left: 0.5rem ; margin-right: 0.75rem; ">离开</input>                   </div>               </div>           </div>       </li>       <li id="qwcs_content" style="display:none">           <div class="item-content">               <div class="item-inner" style="border: 0;">                   <div class="item-title label" style="width:35%">去往处所</div>                   <div class="item-input" align="left">                   <br>                   <input type="radio" name="qwcs" value="本市" style="margin-left: 0.5rem ; margin-right: 0.75rem; ">本市</input><br>                   <input type="radio" name="qwcs" value="省内" style="margin-left: 0.5rem ; margin-right: 0.75rem; ">省内</input><br>                   <input type="radio" name="qwcs" value="省外" style="margin-left: 0.5rem ; margin-right: 0.75rem; ">省外</input><br>                   <input type="radio" name="qwcs" value="国外" style="margin-left: 0.5rem ; margin-right: 0.75rem; ">国外</input><br>                   <input type="radio" name="qwcs" value="其他" style="margin-left: 0.5rem ; margin-right: 0.75rem; ">其他</input>                   </div>               </div>           </div>       </li>   </ul></div>',buttons:[{text:"关闭",onClick:function(){}},{text:"提交",onClick:function(){var t=$('input[name="lxfs"]').val(),i=$('input[name="hsqk"]:checked').val(),r="";"离开"===i&&(r=$('input[name="qwcs"]:checked').val()),""===i?$.toast("核实情况不能为空"):"离开"===i&&""===r?$.toast("去往处所不能为空"):quick_verify_commit(e,t,i,r)}}]})}function toogle_qwcs(e){3===e?$("#qwcs_content").show():$("#qwcs_content").hide()}function quick_verify_commit(e,t,i,r){var a=new AjaxJsonRequest("syrk_hsqk_save.jsp");a.setData("systemid",get_current_system_id()),a.setData("all_full_addr",get_current_all_full_addr()),a.setData("procmode","PMINSERT"),a.setData("rylx","syrk"),a.setData("rybh",e),a.setData("hsqk",i),a.setData("lxfs",t),a.setData("qwcs",r),a.send("发送请求中",function(t){$.alert("核实成功");var r="#jrhs"+e,a="#ljhs"+e;$(r).html("已核实"),$(r).attr("onclick","javascript:void(0);"),$(a).html(i),$(a).attr("onclick","javascript:void(0);"),hs_map.removeByKey(e+""),refreshLabels()},function(e){$.alert("核实失败，"+e)})}function refreshLabels(){var e=hs_map.keysByValue("正常居住").length;$("#right_zcjz").html(e);var t=hs_map.keysByValue("离开").length;$("#right_lk").html(t);var i=hs_map.keysByValue("未见面").length;$("#right_wjm").html(i),0===e&&0===t&&0===i?($("#right_labels").fadeOut(),$("#ry_tjhs_btn").fadeOut()):($("#right_labels").fadeIn(),$("#ry_tjhs_btn").fadeIn())}function clearHsCache(){hs_map=new Map,arr_hsitem=new Array,refreshLabels()}var hs_map=new Map,arr_hsitem=new Array;$(function(){$("#ry_tjhs_btn").click(function(){arr_hsitem.length>0?add_to_verify_commit():$.alert("请添加需要进行核实的人员")})}),Array.prototype.remove=function(e){var t=e;if(this.length>0)for(var i=0;i<this.length;i++)this[i].rybh==t&&this.splice(i,1)};