function AjaxJsonRequest(e){this.url=projectPath+e,this.data=new Object,this.data.bus=[{act:"",des:""}],this.data.pages=[{pno:"1",psize:"15",tsize:"-1"}],this.data.datas=[{}],this.notNotNullField}function judge_if_need_geo(e){for(var t=e.substring(projectPath.length),r=0;r<need_geo_urls.length;r++)if(t===need_geo_urls[r])return!0;return!1}function send_request(e,t,r){addUserInfo(e),isDebugMode&&(console.log("请求内容"+e.url),console.log(JSON.stringify(e.data)));var a=JSON.stringify(e.data),o=$.ajax({url:e.url,type:"post",timeout:2e4,crossDomain:!0,dataType:"text",data:{jsondata:a},success:function(a){$.hidePreloader(),$("#never_at_field").remove(),a=a.replace(/\r\n/g,""),a=a.replace(/\r/g,""),a=a.replace(/\b/g,""),a=a.replace(/\n/g,""),a=a.replace(/\t/g,""),a=a.replace("&nbsp;",""),a=a.replace("&emsp;","");var o=a.indexOf("{"),s=a.lastIndexOf("}"),n=a.substring(o,s+1);isDebugMode&&(console.log("请求成功"+e.url),console.log(n));try{var i=JSON.parse(n)}catch(e){return void r("JSON格式转换失败")}"0"!=i.sta[0].cod?r(i.sta[0].des):t(JSON.parse(n))},error:function(t){$.hidePreloader(),$("#never_at_field").remove(),console.log("请求失败"+e.url),console.log(t),r("请求超时，请检查网络状态")}});ajaxRequestOriginArray.push(o)}function get_geo_then_send_request(e,t,r){try{getCurrentPosition(function(a){var o=a.lontitude,s=a.latitude;console.log("定位成功，经度"+o+"维度"+s),send_request(e,t,r)},function(a){console.log("定位失败"),send_request(e,t,r)})}catch(a){console.log(a),console.log("定位出错"+a),send_request(e,t,r)}}function addUserInfo(e){return e.data.datas.forEach(function(e){e.procmode&&""!=e.procmode||(e.procmode="PMINSERT"),e.userid=sessionStorage.userid,e.username=sessionStorage.username,e.imei=sessionStorage.uuid,e.app_bbh=app_bbh,e.xtlb=xtlb,e.sqm="abc",e.cjzb_x=getCurrentLng()>0?getCurrentLng():"",e.cjzb_y=getCurrentLat()>0?getCurrentLat():""}),e}function NotNullField(){this.keys=new Array,this.values=new Array}function loadFormToJsonObject(e){var t=$(e).serializeArray(),r=new Object;return $.each(t,function(){r[this.name]=this.value}),r}function base64encode(e){var t,r,a,o,s,n;for(a=e.length,r=0,t="";r<a;){if(o=255&e.charCodeAt(r++),r==a){t+=base64EncodeChars.charAt(o>>2),t+=base64EncodeChars.charAt((3&o)<<4),t+="==";break}if(s=e.charCodeAt(r++),r==a){t+=base64EncodeChars.charAt(o>>2),t+=base64EncodeChars.charAt((3&o)<<4|(240&s)>>4),t+=base64EncodeChars.charAt((15&s)<<2),t+="=";break}n=e.charCodeAt(r++),t+=base64EncodeChars.charAt(o>>2),t+=base64EncodeChars.charAt((3&o)<<4|(240&s)>>4),t+=base64EncodeChars.charAt((15&s)<<2|(192&n)>>6),t+=base64EncodeChars.charAt(63&n)}return t}function base64decode(e){var t,r,a,o,s,n,i;for(n=e.length,s=0,i="";s<n;){do t=base64DecodeChars[255&e.charCodeAt(s++)];while(s<n&&t==-1);if(t==-1)break;do r=base64DecodeChars[255&e.charCodeAt(s++)];while(s<n&&r==-1);if(r==-1)break;i+=String.fromCharCode(t<<2|(48&r)>>4);do{if(a=255&e.charCodeAt(s++),61==a)return i;a=base64DecodeChars[a]}while(s<n&&a==-1);if(a==-1)break;i+=String.fromCharCode((15&r)<<4|(60&a)>>2);do{if(o=255&e.charCodeAt(s++),61==o)return i;o=base64DecodeChars[o]}while(s<n&&o==-1);if(o==-1)break;i+=String.fromCharCode((3&a)<<6|o)}return i}function utf16to8(e){var t,r,a,o;for(t="",a=e.length,r=0;r<a;r++)o=e.charCodeAt(r),o>=1&&o<=127?t+=e.charAt(r):o>2047?(t+=String.fromCharCode(224|o>>12&15),t+=String.fromCharCode(128|o>>6&63),t+=String.fromCharCode(128|o>>0&63)):(t+=String.fromCharCode(192|o>>6&31),t+=String.fromCharCode(128|o>>0&63));return t}function utf8to16(e){var t,r,a,o,s,n;for(t="",a=e.length,r=0;r<a;)switch(o=e.charCodeAt(r++),o>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:t+=e.charAt(r-1);break;case 12:case 13:s=e.charCodeAt(r++),t+=String.fromCharCode((31&o)<<6|63&s);break;case 14:s=e.charCodeAt(r++),n=e.charCodeAt(r++),t+=String.fromCharCode((15&o)<<12|(63&s)<<6|(63&n)<<0)}return t}var projectPath="https://qfqz.fjxm110.gov.cn/sspt/jsp/",AT_Field='<div id="never_at_field" style="z-index:20000;position:absolute;width:100%;height:100%;left:0px;top:0px;background:#000;filter:alpha(opacity=0);opacity:0;"></div>',ajaxRequestOriginArray=[],isDebugMode=!0,app_bbh="2.1",xtlb="10",need_geo_urls=["syrk_jnry_save.jsp","syrk_jwry_save.jsp","syrk_wfry_save.jsp","syrk_fk_save.jsp"];window.onunload=function(){if(ajaxRequestOriginArray.length>0){for(var e=0;e<ajaxRequestOriginArray.length;e++){var t=ajaxRequestOriginArray.pop();t.abort()}ajaxRequestOriginArray=[]}},AjaxJsonRequest.prototype.setUrl=function(e){this.url=e},AjaxJsonRequest.prototype.setData=function(e,t){this.data.datas[0][e]=t},AjaxJsonRequest.prototype.setAct=function(e){this.data.bus[0][e]=e},AjaxJsonRequest.prototype.setDes=function(e){this.data.bus[0][e]=e},AjaxJsonRequest.prototype.setPages=function(e,t,r){this.data.pages[0].pno=e+"",this.data.pages[0].psize=t+"",this.data.pages[0].tsize=r+""},AjaxJsonRequest.prototype.setPageNumber=function(e){this.data.pages[0].pno=e+""},AjaxJsonRequest.prototype.setPageSize=function(e){this.data.pages[0].psize=e+""},AjaxJsonRequest.prototype.loadDataFromForm=function(e){for(var t=$(e).serializeArray(),r=0;r<t.length;r++){var a=t[r];this.setData(a.name,a.value)}},AjaxJsonRequest.prototype.setNotNotNullField=function(e){this.notNotNullField=e},AjaxJsonRequest.prototype.send=function(e,t,r){if(!this.url)return void console.log("请求URL不能为空");if(this.notNotNullField){console.log("非空字段"),console.log(this.notNotNullField);for(var a=this.data.datas.length,o=0;o<a;o++){var s=this.data.datas[o];for(var n in s){var i=this.notNotNullField.contains(n);if(i>=0&&(!s[n]||""==s[n]||"请选择"==s[n]))return $.alert("请输入"+this.notNotNullField.getValue(i)),console.log("请求内容"+this.url),void console.log(JSON.stringify(this.data))}}}$("body").append(AT_Field),e&&$.showPreloader(e);var l=judge_if_need_geo(this.url);l?get_geo_then_send_request(this,t,r):send_request(this,t,r)},AjaxJsonRequest.prototype.simpleSend=function(e,t){addUserInfo(this),isDebugMode&&(console.log("请求内容"+this.url),console.log(JSON.stringify(this.data)));var r;r=JSON.stringify(this.data);var a=$.ajax({url:this.url,type:"post",timeout:2e4,crossDomain:!0,dataType:"text",data:{jsondata:r},success:function(r){$("#never_at_field").remove(),r=r.replace(/\r\n/g,""),r=r.replace(/\r/g,""),r=r.replace(/\b/g,""),r=r.replace(/\n/g,""),r=r.replace(/\t/g,""),r=r.replace("&nbsp;",""),r=r.replace("&emsp;",""),r=r.replace(/\\/g,"\\\\");var a=r.indexOf("{"),o=r.lastIndexOf("}"),s=r.substring(a,o+1);isDebugMode&&(console.log("请求成功"+this.url),console.log(s));try{var n=JSON.parse(s)}catch(e){return void t("JSON格式转换失败")}"0"!=n.sta[0].cod?t(n.sta[0].des):e(JSON.parse(s))},error:function(e){console.log("请求失败"+this.url),console.log(e),t("请求超时，请检查网络状态")}});ajaxRequestOriginArray.push(a)},NotNullField.prototype.add=function(e,t){this.keys.push(e),this.values.push(t)},NotNullField.prototype.contains=function(e){for(i=0;i<this.keys.length;i++)if(this.keys[i]==e)return i;return-1},NotNullField.prototype.getValue=function(e){return this.values[e]},NotNullField.prototype.clear=function(){this.keys=new Array,this.values=new Array};var base64EncodeChars="KAMkO9QRfTLBVDzF2H6JNCW4Y+apcPobqrjtunwxSeghisUlmvyE01G3X5I78dZ/",base64DecodeChars=new Array(-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,-1,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,-1,-1,-1,-1,-1);